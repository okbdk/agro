# Конфигурация и алгоритмы

Полигон 1 (P1)
---------------

| Емкость с раствором |
| ------------------- |
* pin A11 - датчик температуры (P1_T) 
  * если (P1_T < **_G_Tmin_**) или (P1_T > **_G_Tmax_**) : **Alarm(недопустимая температура в емкости 1)**
  * **_G_Tmin_** и **_G_Tmax_** - глобальные константы для всей установки
* pin A13 - pH метр (P1_pH)
  * если (P1_pH < **_P1_pHmin_**) или (P1_pH > **_P1_pHmax_**) : **Alarm(недопустимый pH в емкости 1, запрет помпы)** и запрет работы помпы P1_R - нельзя поливать растения кислотой или щелочью
  * **_P1_pHmin_** и **_P1_pHmin_** - локальные константы для полигона 1 (может быть на разных полигонах полив разными растворами?)
* pin A9 - датчик уровня жидкости (P1_L)
  * если (P1_L < **_P1_Lmin_**) : **Alarm(пустая емкость 1, запрет помпы)** и запрет работы помпы P1_R - нельзя включать мотор помпы насухую
  * **_P1_Lmin_** - локальная константа для полигона 1 (могут быть разные емкости и по разному установлены датчики?)
* pin 40 - реле помпы (P1_R)
  * включение на **_P1_Rsec_** секунд по триггеру контроля датчиков влажности полигона 1
  * **_P1_Rsec_** - локальная константа для полигона 1 (может быть разная конфигурация полива - помпы, форсунки, и разный расход раствора)

| Датчики влажности |
| ----------------- |
* pin A1 - датчик влажности трубы "Помидоры" (P1_H1)
* pin A2 - датчик влажности трубы "Помидоры" (P1_H2)
* pin A3 - датчик влажности трубы "Клубника" (P1_H3)
* pin A4 - датчик влажности трубы "Клубника" (P1_H4)
  * если (среднее(P1_H1, P1_H2, P1_H3, P1_H4) < **_P1_Hmin_**) : включить реле помпы P1_R, если запрет - **Alarm(низкая влажность полигона 1, и помпа выключена)**
  * **_P1_Hmin_** - локальная константа для полигона 1 (могут быть разные условия по полигонам для растений)
  * если (среднеквадратичная ошибка(P1_H1, P1_H2, P1_H3, P1_H4) > **_G_Herrmax_**) : **Alarm(неравномерная влажность полигона 1)**
  * **_G_Herrmax_** - глобальная константа для всей установки 

Полигон 2 (P2)
---------------

| Емкость с раствором |
| ------------------- |

Алгоритмы контроля такие же, с учетом локальных констант

* pin A12 - датчик температуры (P2_T) 
* pin A14 - pH метр (P2_pH)
* pin A10 - датчик уровня жидкости (P2_L)
* pin 43 - реле помпы R (P2_R)

| Датчики влажности |
| ----------------- |
* pin A5 - датчик влажности субстрата "Земля" (P2_H1)
* pin A6 - датчик влажности субстрата "Земля" (P2_H2)
* pin A7 - датчик влажности субстрата "Кокос" (P2_H3)
* pin A8 - датчик влажности субстрата "Кокос" (P2_H4)

Общая освещенность
---------------------------------
* pin A15 - фотодатчик (F), длительность непрерывного света (FsunT), длительность непрерывной темноты (FnightT)
  * если (текущее значение FsunT > **_G_FsunTmax_**) : **Alarm(лампа освещения - день длится слишком долго)**
  * если (текущее значение FnightT > **_G_FnightTmax_**) : **Alarm(лампа освещения - ночь длится слишком долго)**
  * если (в момент переключения освещения FsunT < **_G_FsunTmin_**) : **Alarm(лампа освещения - день был слишком короткий)**
  * если (в момент переключения освещения FnightT < **_G_FnightTmin_**) : **Alarm(лампа освещения - ночь была слишком короткая)**
  * **_G_FsunTmax_**, **_G_FnightTmax_**, **_G_FsunTmin_**, **_G_FnightTmin_** - глобальные константы для всей установки
  
Общая влажность
---------------
